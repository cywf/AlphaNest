---
import Layout from '../layouts/Layout.astro';
import ArbitrageTable from '../components/ArbitrageTable';
import ProfitCalculator from '../components/ProfitCalculator';

const title = 'AlphaNest - Arbitrage Opportunities';
const description = 'Real-time cryptocurrency arbitrage opportunities across multiple exchanges';

// Check if demo mode is requested
const url = new URL(Astro.request.url);
const demoMode = url.searchParams.get('demo') === 'true';
---

<Layout title={title} description={description}>
  <main class="container mx-auto px-4 py-8 max-w-7xl">
    <!-- Page Header -->
    <div class="text-center mb-12">
      <h1 class="text-5xl font-bold mb-4 bg-gradient-to-r from-primary via-secondary to-accent bg-clip-text text-transparent">
        âš¡ Crypto Arbitrage Dashboard
      </h1>
      <p class="text-xl opacity-80 max-w-3xl mx-auto">
        Discover profitable arbitrage opportunities across top cryptocurrency exchanges in real-time
      </p>
    </div>

    <!-- Arbitrage Table -->
    <div class="mb-12">
      <ArbitrageTable client:load demoMode={demoMode} />
    </div>

    <!-- Profit Calculator -->
    <div class="mb-12">
      <ProfitCalculator client:load />
    </div>

    <!-- Info Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-12">
      <div class="card bg-base-200 shadow-lg">
        <div class="card-body">
          <h3 class="card-title text-primary">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
            </svg>
            Fast Detection
          </h3>
          <p class="text-sm opacity-80">
            Our engine scans multiple exchanges every 5-10 seconds to identify arbitrage opportunities as they emerge.
          </p>
        </div>
      </div>

      <div class="card bg-base-200 shadow-lg">
        <div class="card-body">
          <h3 class="card-title text-secondary">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z" />
            </svg>
            Smart Calculations
          </h3>
          <p class="text-sm opacity-80">
            All profit calculations account for trading fees, withdrawal fees, and estimated transfer times between exchanges.
          </p>
        </div>
      </div>

      <div class="card bg-base-200 shadow-lg">
        <div class="card-body">
          <h3 class="card-title text-accent">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
            </svg>
            Members Only
          </h3>
          <p class="text-sm opacity-80">
            Real-time data requires an active membership. Demo mode shows sample opportunities for evaluation.
          </p>
        </div>
      </div>
    </div>

    <!-- How It Works -->
    <div class="card bg-gradient-to-br from-base-200 to-base-300 shadow-xl mb-12">
      <div class="card-body">
        <h2 class="card-title text-3xl mb-6">How Arbitrage Works</h2>
        
        <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
          <div class="flex flex-col items-center text-center">
            <div class="w-16 h-16 rounded-full bg-primary/20 flex items-center justify-center mb-3">
              <span class="text-2xl font-bold text-primary">1</span>
            </div>
            <h4 class="font-bold mb-2">Price Difference</h4>
            <p class="text-sm opacity-80">Spot price discrepancies between exchanges</p>
          </div>

          <div class="flex flex-col items-center text-center">
            <div class="w-16 h-16 rounded-full bg-secondary/20 flex items-center justify-center mb-3">
              <span class="text-2xl font-bold text-secondary">2</span>
            </div>
            <h4 class="font-bold mb-2">Buy Low</h4>
            <p class="text-sm opacity-80">Purchase crypto at lower price on Exchange A</p>
          </div>

          <div class="flex flex-col items-center text-center">
            <div class="w-16 h-16 rounded-full bg-accent/20 flex items-center justify-center mb-3">
              <span class="text-2xl font-bold text-accent">3</span>
            </div>
            <h4 class="font-bold mb-2">Transfer</h4>
            <p class="text-sm opacity-80">Move crypto to Exchange B (5-30 min)</p>
          </div>

          <div class="flex flex-col items-center text-center">
            <div class="w-16 h-16 rounded-full bg-success/20 flex items-center justify-center mb-3">
              <span class="text-2xl font-bold text-success">4</span>
            </div>
            <h4 class="font-bold mb-2">Sell High</h4>
            <p class="text-sm opacity-80">Sell at higher price and pocket the difference</p>
          </div>
        </div>

        <div class="alert alert-warning mt-6">
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="stroke-current shrink-0 w-6 h-6">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
          </svg>
          <div>
            <h4 class="font-bold">Risk Warning</h4>
            <p class="text-sm">
              Cryptocurrency trading carries risk. Prices can change rapidly during transfers. 
              Always account for fees, slippage, and transfer times. This tool is for informational purposes only.
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- CTA -->
    {!demoMode && (
      <div class="text-center">
        <div class="card bg-gradient-to-r from-primary to-secondary text-primary-content shadow-2xl max-w-2xl mx-auto">
          <div class="card-body">
            <h2 class="card-title text-3xl justify-center">Ready to Start?</h2>
            <p class="text-lg opacity-90">
              Join AlphaNest and get instant access to real-time arbitrage opportunities
            </p>
            <div class="card-actions justify-center mt-4">
              <a href="/arbitrage?subscribe=true" class="btn btn-lg bg-white text-primary hover:bg-base-100">
                Subscribe Now - $20/month
              </a>
              <a href="/arbitrage?demo=true" class="btn btn-lg btn-outline btn-ghost">
                Try Demo
              </a>
            </div>
          </div>
        </div>
      </div>
    )}
  </main>
</Layout>

<style>
  /* Add subtle animations */
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-10px); }
  }
  
  .card:hover {
    transform: translateY(-2px);
    transition: transform 0.2s ease-in-out;
  }
</style>
